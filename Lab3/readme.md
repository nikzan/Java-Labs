# Лабораторная работа №3

## Содержание
1. [Структура проекта](#структура-проекта)
2. [Как работает основной код в Main](#как-работает-основной-код-в-main)
3. [Задача 1A — Перезарядка пистолета](#задача-1a-перезарядка-пистолета)
4. [Задача 1B — Имя](#задача-1b-имя)
5. [Задача 2 — Телефонный справочник](#задача-2-телефонный-справочник)
6. [Задача 3 — Автомат](#задача-3-автомат)
7. [Задача 4 — Иерархия оружия](#задача-4-иерархия-оружия)
8. [Задача 5 — Стрелок](#задача-5-стрелок)
9. [Задача 6 — Точка](#задача-6-точка)
10. [Задача 8 — Пистолет с protected ammo](#задача-8-пистолет-с-protected-ammo)
11. [Вспомогательные элементы](#вспомогательные-элементы)

## Структура проекта
Проект состоит из следующих классов:
- `Main` — главный класс с точкой входа и демонстрацией задач.
- `TestRunner` — автоматическое тестирование всех задач.
- `Gun` — класс пистолета с перезарядкой, выстрелами и разрядкой.
- `Name` — формирование полного имени из частей (имя, отчество, фамилия) с валидацией.
- `PhoneBook` — простой телефонный справочник (имя - телефон).
- `MachineGun` — автомат на основе `Gun` с повышенной скорострельностью.
- `Weapon` и `Weapon2` — абстрактные базовые классы оружия.
- `Gun3` — пистолет с защищенным хранением патронов (`protected ammo`).
- `Shooter` — класс стрелка, который может стрелять из `Weapon`.
- `Point` — класс геометрической точки с методами `equals` и `hashCode`.

## Как работает основной код в Main
В `Main.main` формируется меню для выбора демонстрации задач. При запуске с двумя аргументами программа вычисляет степень числа:
```bash
java ru.nikzan.main.Main <x> <y>
```

## Задача 1A — Перезарядка пистолета
Реализация: класс `Gun`.
### Назначение
Пистолет с возможностью перезарядки и выстрелов.
### Конструкторы
- `Gun()` — магазин на 5 патронов по умолчанию.
- `Gun(int maxBullets)` — явное задание максимального числа патронов.
### Поведение
- `reload(int ammo)` — пополняет магазин, возвращает избыток патронов.
- `shoot()` — выводит «Бах!» при наличии патронов и уменьшает счётчик, иначе «Клац!». 
- `unload()` — сбрасывает все патроны и возвращает их число.
**Примеры тестирования (TestRunner test1A):**
```
Gun gun = new Gun(5);
gun.reload(5); gun.shoot(); gun.shoot(); gun.shoot();
gun.shoot(); gun.shoot(); // Клац!
...
```

## Задача 1B — Имя
Реализация: класс `Name`.
### Назначение
Формирование полного ФИО из частей: имя, отчество, фамилия.
### Конструкторы и инварианты
- `Name(String firstName)`
- `Name(String firstName, String lastName)`
- `Name(String firstName, String patronymic, String lastName)`
- Валидация: хотя бы одна строка должна быть непустой, иначе выбрасывается `IllegalArgumentException`.
### Особенности
Метод `toString()` объединяет непустые части через пробел.
**Примеры тестирования (TestRunner test1B):**
```
new Name("Клеопатра") -> Клеопатра
new Name("Александр", "Сергеевич", "Пушкин") -> Александр Сергеевич Пушкин
```

## Задача 2 — Телефонный справочник
Реализация: класс `PhoneBook`.
### Назначение
Управление парами имя–телефон.
### Методы
- `String add(String phone, String name)` — добавляет или заменяет контакт.
- `void remove(String name)` — удаляет контакт.
- `String get(String name)` — возвращает телефон.
- `boolean containsPhone(String phone)`, `boolean containsName(String name)`.
- `String[] getNamesByPrefix(String prefix)`.
- `String toString()`
**Примеры тестирования (TestRunner test2):**
```
book.add("555-1234", "Иван"); ...
```

## Задача 3 — Автомат
Реализация: класс `MachineGun`.
### Назначение
Автомат на основе `Gun` с повышенной скорострельностью.
### Конструкторы
- `MachineGun()` — 30 патронов, скорострельность 30.
- `MachineGun(int maxAmmo)` — скорость = maxAmmo/2.
- `MachineGun(int maxAmmo, int rateOfFire)` — явное указание скорости.
### Поведение
- `shoot()` — стреляет `rateOfFire` раз.
- `shootForSeconds(int seconds)` — стреляет `seconds*rateOfFire` раз.
**Примеры тестирования (TestRunner test3):**
```
MachineGun mg = new MachineGun(30, 3);
mg.reload(30); mg.shoot(); mg.shootForSeconds(2);
```

## Задача 4 — Иерархия оружия
Реализация: абстрактный класс `Weapon` и класс `Gun`.
### Назначение
Определение общей модели оружия.
### Методы и конструкторы
- `Weapon(int ammo)` 
- `abstract void shoot()`
- `boolean getAmmo()`, `int load(int ammo)`.
- `Gun` расширяет `Weapon` с защищённым полем `ammo`.
**Примеры тестирования (TestRunner test4):**
```
Weapon w1 = new Gun(5); w1.load(3); w1.shoot(); ...
```

## Задача 5 — Стрелок
Реализация: класс `Shooter`.
### Назначение
Стрелок с именем и оружием (`Weapon`).
### Методы
- `void shoot()` — выводит сообщение о выстреле или отсутствии оружия.
**Примеры тестирования (TestRunner test5):**
```
Shooter s1 = new Shooter("Безоружный Боб"); s1.shoot(); ...
```

## Задача 6 — Точка
Реализация: класс `Point`.
### Назначение
Геометрическая точка с координатами `(x; y)`.
### Методы
- `double getX()`, `double getY()`.
- `String toString()`, `boolean equals(Object)`, `int hashCode()`.
**Примеры тестирования (TestRunner test6):**
```
Point p1 = new Point(3,5); p1.equals(p2); ...
```

## Задача 8 — Пистолет с protected ammo
Реализация: класс `Gun3`.
### Назначение
Пистолет с защищённым полем `ammo` и контролем загрузки.
### Методы
- `reload(int ammoToLoad)`, `unload()`, `shoot()`.
**Примеры тестирования (TestRunner test8):**
```
Gun3 gun = new Gun3(10); gun.reload(7); gun.shoot(); ...
```

## Вспомогательные элементы
- Класс `Main` содержит методы ввода `getIntInput`, `getStringInput` с валидацией.
- Используется `Scanner` для дружелюбного ввода и повторных запросов.
